<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!--Css-->
    <link rel="stylesheet" href="../static/css/index.css">
    <title>FRC Depreciation</title>
    <style>
        /* Table styling */
        table {
            border-collapse: collapse;
            width: 100%;
        }
        
        th {
            background-color: #f2f2f2;
            font-weight: bold;
            text-align: left;
            padding: 8px;
            border: 1px solid #dddddd;
        }
        
        td {
            text-align: left;
            padding: 8px;
            border: 1px solid #dddddd;
        }
        .left {
          display: flex;
          flex-direction: row; /* Arrange items in a row */
        }
      
        .left > div {
          margin-right: 10px; /* Add spacing between buttons */
          margin-top: 10px;
          
        }
    </style>
  </head>
  <body>
    {% include 'header.html' %}
    <div class='left'>
      <div>
        <a href="{% url 'dashboard' %}">
            <button type="button" class="btn btn-primary btn-block">Dashboard</button>
        </a>
    </div>
      <div>
        <a href="{% url 'frc_asset_register' %}">
          <button type="submit" class="btn btn-primary btn-block">Asset Register</button>
        </a>
      </div>
      <div>
        <a href="{% url 'frc_asset_schedule' %}">
          <button type="submit" class="btn btn-primary btn-block">Asset Schedule</button>
        </a>
      </div>
      <div>
        <a href="{% url 'frc_dep' %}">
          <button type="submit" class="btn btn-primary btn-block">Depriciation</button>
        </a>
      </div>
      <div>
        <a href="{% url 'current_asset_info' %}">
          <button type="submit" class="btn btn-primary btn-block"> Asset Info</button>
        </a>
      </div>
      <div>
        <a href="{% url 'asset_info' %}">
          <button type="submit" class="btn btn-primary btn-block">Input Asset Info</button>
        </a>
      </div>
      <div>
        <a href="{% url 'frc_data_entry' %}">
          <button type="submit" class="btn btn-primary btn-block">Data Entry</button>
        </a>
      </div>
      <div>
        <a href="{% url 'frc_system' %}">
            <button type="button" class="btn btn-primary btn-block">File Upload</button>
        </a>
    </div>
      <div>
        <form method="post" action="" id="download_csv_frc_dep">
          {% csrf_token %}
          <input type="submit" class="btn btn-success ml-2" onclick="download_csv_frc_dep()" value="Download as excel" />
        </form>
      </div>
    </div>
    <br><br><br>

    <div class="col-md-9">
      <!-- Filter dropdown -->
    <!-- Filter dropdown -->
    <select id="filterDropdown">
      <option value="">Select Financial Year</option>
      {% for value in unique_values %}
          <option value="{{ value }}">{{ value }}</option>
      {% endfor %}
  </select>

  <!-- Display count -->
  <p>Number of entries: <span id="rowCount"></span></p>
  
  <!-- Display rows -->
  <div id="rowsContainer">
      {{ header_html|safe }}
      {{ rows_html|safe }}
  </div>
    </div>

    <!---->   
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    
  
    <script src="../static/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


    <script>
      $(document).ready(function(){
          // Function to update row count
          function updateRowCount() {
              var selectedValue = $("#filterDropdown").val();
              var rowCount = $("#rowsContainer table tbody tr").filter(function() {
                  var rowValue = $(this).find("td:first").text();
                  return rowValue === selectedValue || selectedValue === "";
              }).length;
              if(selectedValue == "")

              $("#rowCount").text(rowCount);
          }

          // Dropdown change event to filter table rows and update count
          $("#filterDropdown").on("change", function() {
              $("#rowsContainer table tbody tr").hide(); // Hide all rows initially
              var selectedValue = $(this).val();

              $("#rowsContainer table tbody tr").filter(function() {
                  var rowValue = $(this).find("td:first").text();
                  return rowValue === selectedValue || selectedValue === "";
              }).show(); // Show rows matching the selected value or show all if no value is selected

              updateRowCount(); // Update row count
          });

          // Initial row count when the page loads
          updateRowCount();
      });
  </script>
  <script>
    function download_csv_frc_dep() {
        document.getElementById("download_csv_frc_dep").action = "{% url 'download_csv_frc_dep' %}";
        document.getElementById("download_csv_frc_dep").submit();
    }
  </script>
    
  </body>
</html>