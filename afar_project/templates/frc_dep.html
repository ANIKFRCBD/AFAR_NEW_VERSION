<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="../static/css/index.css">
  <title>FRC Depreciation</title>
  <style>
    .org_name {
      text-align: center;
      padding: 1.5rem;
      background-color: beige;
    }
    .org_name h1 {
      font-weight: 800;
      font-size: 20px;
    }
    .highlight {
      background-color: rgba(255, 255, 255, 0.3);
    }
    .left {
      background-color: #f8f9fa;
      padding: 15px;
    }
    .btn-block {
      margin-bottom: 10px;
    }
    .container1 {
      overflow-y: auto;
      max-height: 400px; /* Adjust as needed */
    }
  </style>
</head>

<body>
  {% include 'header.html' %}
  
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-3 left">
        <!-- Sidebar Navigation -->
        <div class="mb-3">
          <a href="{% url 'dashboard' %}">
            <button type="button" class="btn btn-secondary btn-block shadow">Dashboard</button>
          </a>
        </div>
        <div class="mb-3">
          <a href="{% url 'frc_asset_register' %}">
            <button type="submit" class="btn btn-secondary btn-block shadow">Asset Register</button>
          </a>
        </div>
        <div class="mb-3">
          <a href="{% url 'frc_asset_schedule' %}">
            <button type="submit" class="btn btn-secondary btn-block shadow">Asset Schedule</button>
          </a>
        </div>
        <div class="mb-3">
          <a href="{% url 'frc_dep' %}">
            <button type="submit" class="btn btn-secondary btn-block shadow">Depreciation</button>
          </a>
        </div>
        <div class="mb-3">
          <a href="{% url 'current_asset_info' %}">
            <button type="submit" class="btn btn-secondary btn-block shadow">Asset Info</button>
          </a>
        </div>
        <div class="mb-3">
          <a href="{% url 'asset_info' %}">
            <button type="submit" class="btn btn-secondary btn-block shadow">Input Asset Info</button>
          </a>
        </div>
        <div class="mb-3">
          <a href="{% url 'frc_data_entry' %}">
            <button type="submit" class="btn btn-secondary btn-block shadow">Data Entry</button>
          </a>
        </div>
        <div class="mb-3">
          <a href="{% url 'frc_system' %}">
            <button type="button" class="btn btn-secondary btn-block shadow">File Upload</button>
          </a>
        </div>
        <div class="mb-3">
          <form method="post" action="" id="download_csv_frc_dep">
            {% csrf_token %}
            <input type="submit" class="btn btn-success btn-block shadow" onclick="download_csv_frc_dep()"
              value="Download as Excel" />
          </form>
        </div>
      </div>

      <div class="col-md-9">
        <!-- Filter Dropdown -->
        <div class="d-flex align-items-center mt-3 mb-3">
          <label for="filterDropdown" class="mr-3 text-dark">Select Financial Year:</label>
          <select class="form-control w-25" id="filterDropdown">
            <option value="">Select Financial Year</option>
            {% for value in unique_values %}
            <option value="{{ value }}">{{ value }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Row Count -->
        <p class="text-muted">Number of entries: <span id="rowCount"></span></p>

        <!-- Table Rows Container -->
        <div class="container1" id="rowsContainer">
          {{ header_html|safe }}
          {{ rows_html|safe }}
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="org_name">
    <h1>Financial Reporting Council</h1>
    <p>
      Parjatan Bhaban (8th floor), Plot: E-5 C/1, West Agargaon, Sher-e-Bangla Nagar Administrative Area, Dhaka-1207, Bangladesh <br>
      Email: ed.ss@frc.gov.bd | Office: +88 02 41024674 | Website: frc.gov.bd
    </p>
    <p>All rights reserved by Financial Reporting Council Bangladesh</p>
  </div>

  <!-- jQuery, Popper.js, Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <script>
    $(document).ready(function () {
      // Update row count
      function updateRowCount() {
        var selectedValue = $("#filterDropdown").val();
        var rowCount = $("#rowsContainer table tbody tr").filter(function () {
          var rowValue = $(this).find("td:first").text();
          return rowValue === selectedValue || selectedValue === "";
        }).length;
        $("#rowCount").text(rowCount);
      }

      // Dropdown change event
      $("#filterDropdown").on("change", function () {
        $("#rowsContainer table tbody tr").hide(); // Hide all rows initially
        var selectedValue = $(this).val();

        $("#rowsContainer table tbody tr").filter(function () {
          var rowValue = $(this).find("td:first").text();
          return rowValue === selectedValue || selectedValue === "";
        }).show(); // Show rows matching the selected value or show all if no value is selected

        updateRowCount();
      });

      // Initial row count on page load
      updateRowCount();
    });
  </script>

  <script>
    function download_csv_frc_dep() {
      document.getElementById("download_csv_frc_dep").action = "{% url 'download_csv_frc_dep' %}";
      document.getElementById("download_csv_frc_dep").submit();
    }
  </script>

  <script>
    function setMaxHeight() {
      var screenWidth = window.innerWidth;
      var maxHeight;
      if (screenWidth <= 1200) {
        maxHeight = screenWidth * 0.9;
      } else {
        maxHeight = screenWidth * 0.35;
      }
      document.getElementById("rowsContainer").style.maxHeight = maxHeight + "px";
    }
    window.onload = setMaxHeight;
    window.onresize = setMaxHeight;
  </script>

</body>
</html>
